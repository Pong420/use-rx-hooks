import { Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { Preview } from '../utils';
import { UploadImage } from './UploadImage.tsx';
import { PasteImage } from './PasteImage.tsx';
import { DropImage } from './DropImage.tsx';
import { MixTogether } from './MixTogether.tsx';
import { Window } from './Window.tsx';

import uploadImageCode from '!!raw-loader!./UploadImage.tsx';
import pasteImageCode from '!!raw-loader!./PasteImage.tsx';
import dropImageCode from '!!raw-loader!./DropImage.tsx';
import mixTogetherCode from '!!raw-loader!./MixTogether.tsx';
import windowCode from '!!raw-loader!./Window.tsx';

<Meta title="useRxFileToImage" />

# useRxFileToImage

```js
const image$ = useRxFileToImage(source$);

// HOC of `useRxFileToImage`
const [image$, props] = useRxUploadImage();
const [image$, props] = useRxDropImage();
const [image$, props] = useRxPasteImage();
```

## Typings

```js

export type RxFileToImageSource = [
  FileList | DataTransferItemList | null,
  Event | SyntheticEvent<Element | Window>
];

export interface RxFileToImageState {
  file: File;
  url: string;
}

export function useRxFileToImage(source$: Observable<RxFileToImageSource> | Array<Observable<RxFileToImageSource>>): Observable<RxFileToImageState>:

export function useRxUploadImage(): [Observable<RxFileToImageState[]>, { onChange }];
export function useRxDropImage(): [Observable<RxFileToImageState[]>, { onPaste }];
export function useRxPasteImage(): [Observable<RxFileToImageState[]>, { onDrop, onDragOver }];
```

## Upload Image

<Preview name="Upload Image" code={uploadImageCode}>
  <UploadImage />
</Preview>

## Paste Image

<Preview name="Paste Image" code={pasteImageCode}>
  <PasteImage />
</Preview>

## Drop Image

<Preview name="Drop Image" code={dropImageCode}>
  <DropImage />
</Preview>

## Mix Together

<Preview name="Mix Together" code={mixTogetherCode}>
  <MixTogether />
</Preview>

## Custom

> you could import `fromDropImageEvent`, `fromPasteImageEvent`, `useRxFileToImage` from this libaray

An example

- mix paste and drop action
- use window instead of dom

<Source code={windowCode} language="jsx" />
