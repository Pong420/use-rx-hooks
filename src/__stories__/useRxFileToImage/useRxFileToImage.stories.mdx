import { Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { Preview } from '../utils';
import { PasteImage } from './PasteImage.tsx';
import { DropImage } from './DropImage.tsx';
import { Window } from './Window.tsx';

import pasteImageCode from '!!raw-loader!./PasteImage.tsx';
import dropImageCode from '!!raw-loader!./DropImage.tsx';
import windowCode from '!!raw-loader!./Window.tsx';

<Meta title="useRxFileToImage" />

# useRxFileToImage

```js
const [state?, props] = useRxFileToImage(fn);

// HOC of `useRxFileToImage`
const [state?, props] = useRxDropImage();
const [state?, props] = useRxPasteImage();
```

## Typings

```js
import { FromEventTarget } from 'rxjs/internal/observable/fromEvent';

export type RxFileToImageInput<E> = (
  target: FromEventTarget<E>
) => Observable<[DataTransferItemList | null, Event]>;

export type RxFileToImageState<T> = [
  State | undefined,
  {
    ref: RefObject<T>;
  }
];

interface State {
  file: File;
  url: string;
  type: string;
}

interface Props<T> {
  ref: RefObject<T>;
}

export function useRxFileToImage<T extends HTMLElement, E extends Event>(
  fn: RxFileToImageInput<E>
): RxFileToImageState<T>:

export function useRxDropImage<T>(): RxFileToImageState<T>;
export function useRxPasteImage<T>(): RxFileToImageState<T>;
```

### Paste Image

<Preview name="Paste Image" code={pasteImageCode}>
  <PasteImage />
</Preview>

### Drop Image

<Preview name="Drop Image" code={dropImageCode}>
  <DropImage />
</Preview>

### Custom

> you could import `fromDropEvent`, `fromPasteEvent`, `useRxFileToImage` from this libaray

An example

- mix paste and drop action
- use window instead of dom

<Source code={windowCode} language="jsx" />
