import { Meta, Story, Source } from '@storybook/addon-docs/blocks';
import { useRxInput } from '../../useRxInput';
import { Preview } from '../utils';
import { Basic } from './Basic.tsx';
import { Composing } from './Composing.tsx';
import { DefaultValue } from './DefaultValue.tsx';
import { Debounce } from './Debounce.tsx';
import { Double } from './Double.tsx';

import basicCode from '!!raw-loader!./Basic.tsx';
import composingCode from '!!raw-loader!./Composing.tsx';
import defaultValueCode from '!!raw-loader!./DefaultValue.tsx';
import debounceCode from '!!raw-loader!./Debounce.tsx';
import doubleCode from '!!raw-loader!./Double.tsx';

<Meta title="useRxInput" />

# useRxInput

```js
const [value, inputProps] = useRxInput(options?);
const [value, inputProps] = useRxInputComposing(options?);
```

## Typings

```js
export type RxInputEl = HTMLInputElement | HTMLTextAreaElement;

export type RxInputPipe<O> = (ob: Observable<string>) => Observable<string | O>;

export interface RxInputOptions<O> {
  defaultValue?: string;
  pipe?: RxInputPipe<O>;
}

export function useRxInput<O, T extends RxInputEl = HTMLInputElement>(
  options?: RxInputOptions<O>
): [
  string | O | undefined,
  Required<Pick<InputHTMLAttributes<T>, 'value' | 'onChange'>>
];

export function useRxInputComposing<O, T extends RxInputEl = HTMLInputElement>(
  options?: RxInputOptions<O>
): [
  string | O | undefined,
  Required<
    Pick<
      InputHTMLAttributes<T>,
      'value' | 'onChange' | 'onCompositionStart' | 'onCompositionEnd'
    >
  >
];
```

## Basic

<Preview name="Basic" code={basicCode}>
  <Basic />
</Preview>

## With default value

<Preview name="Default Value" code={defaultValueCode}>
  <DefaultValue />
</Preview>

## Ignore value change while composing

<Preview name="Composing" code={composingCode}>
  <Composing />
</Preview>

## Debounce 1 second

<Preview name="Debounce" code={debounceCode}>
  <Debounce />
</Preview>

## Double your input

<Preview name="Double" code={doubleCode}>
  <Double />
</Preview>
