import { Meta, Story, Preview, Source } from '@storybook/addon-docs/blocks';
import { useRxAsync } from '../useRxAsync';

import sharedCode from '!!raw-loader!./useRxAsync/utils.tsx';

<Meta title="useRxAsync" component={useRxAsync} parameters={{ docs: { page: null } }} />

# useRxAsync

```js
const state = useRxAsync(input, options?);
```

## Typings

```js
interface State<T> {
  loading: boolean;
  error?: any;
  data?: T;
  run: () => void;
  cancel: () => void;
}

interface RxAsyncOptions<I, O = I> {
  initialValue?: O;
  defer?: boolean;
  pipe?(ob: Observable<I>): Observable<O>;
  onSuccess?(value: O): void;
  onFailure?(error: any): void;
}

declare function useRxAsync<T, O = T>(
  input: ObservableInput<T>,
  options?: RxAsyncOptions<T, O>
): State<O>;
```

## Demo

> Shared code used in below demo

<Source {...{ code: sharedCode, language: 'js' }} />

### Basic
