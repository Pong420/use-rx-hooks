(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxInput=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63);exports.useRxInput=function useRxInput({defaultValue:defaultValue="",pipe:pipe}={}){const subject=react_1.useRef(new rxjs_1.Subject),[value,setValue]=react_1.useState(defaultValue),[output,setOutput]=react_1.useState(void 0===pipe?defaultValue:void 0),handleChange=react_1.useCallback(event=>subject.current.next(event),[]);return react_1.useEffect(()=>{const subsciprtion=subject.current.pipe(operators_1.map(evt=>evt.target.value),operators_1.tap(next=>setValue(next)),operators_1.startWith(defaultValue),pipe||rxjs_1.pipe()).subscribe(setOutput);return()=>subsciprtion.unsubscribe()},[defaultValue,pipe]),[output,{value:value,onChange:handleChange}]}},177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxAsync=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63);function initializerArg(data){return{loading:!1,data:data,initialValue:data}}function reducer(state,action){switch(action.type){case"FETCH_INIT":return{...initializerArg(state.data),initialValue:state.initialValue,loading:!0};case"FETCH_SUCCESS":return{...state,loading:!1,data:action.payload};case"FETCH_FAILURE":return{...state,loading:!1,error:action.payload};case"CANCEL":return{...state,loading:!1};case"RESET":return{...initializerArg(state.initialValue)};default:throw new Error}}const defaultFn=()=>{};exports.useRxAsync=function useRxAsync(fn,options={}){const{defer:defer,initialValue:initialValue,onStart:onStart=defaultFn,onSuccess:onSuccess=defaultFn,onFailure:onFailure=defaultFn,mapOperator:mapOperator=operators_1.switchMap,effect:effect=react_1.useEffect}=options,[state,dispatch]=react_1.useReducer(reducer,initialValue,initializerArg),subject=react_1.useRef(new rxjs_1.Subject),cancelSubject=react_1.useRef(new rxjs_1.Subject),{run:run,cancel:cancel,reset:reset}=react_1.useMemo(()=>({run:params=>subject.current.next(params),cancel:()=>{cancelSubject.current.next(),dispatch({type:"CANCEL"})},reset:()=>{cancelSubject.current.next(),dispatch({type:"RESET"})}}),[]);return effect(()=>{if(reset(),fn){const subscription=subject.current.pipe(mapOperator(params=>(onStart(),dispatch({type:"FETCH_INIT"}),rxjs_1.defer(()=>fn(params)).pipe(operators_1.catchError(payload=>(onFailure(payload),dispatch({type:"FETCH_FAILURE",payload:payload}),rxjs_1.empty())),operators_1.takeUntil(cancelSubject.current))))).subscribe(payload=>{dispatch({type:"FETCH_SUCCESS",payload:payload}),onSuccess(payload)});return()=>{subscription.unsubscribe()}}},[fn,run,defer,reset,mapOperator,onStart,onSuccess,onFailure]),react_1.useEffect(()=>{!defer&&run()},[run,defer,fn]),{...state,run:run,cancel:cancel,reset:reset}}},220:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Display=void 0;const react_1=__importDefault(__webpack_require__(0));exports.Display=function Display({data:data,loading:loading,error:error,style:style}){return react_1.default.createElement("div",{style:style},react_1.default.createElement("pre",null,loading?"loading...":error?error&&error.message||"error":data?react_1.default.createElement("div",null,JSON.stringify(data,null,2)):null))}},221:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxFileToImage=exports.fileToImage=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63);function fileToImage([items,event]){const list=[];if(items&&items.length)for(let i=0;i<items.length;i++){const item=items[i];if(-1!==item.type.indexOf("image")){event.preventDefault();const file=item instanceof File?item:item.getAsFile();file&&list.push(rxjs_1.from(getBase64ImageURL(file)).pipe(operators_1.map(url=>({url:url,file:file}))))}}return list}exports.fileToImage=fileToImage,exports.useRxFileToImage=function useRxFileToImage(source$){return react_1.useMemo(()=>rxjs_1.merge(...Array.isArray(source$)?source$:[source$]).pipe(operators_1.mergeMap(([items,event])=>rxjs_1.zip(...fileToImage([items,event])))),[source$])};const getBase64ImageURL=file=>new Promise((resolve,reject)=>{const canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),img=new Image;img.onload=()=>{canvas.width=img.width,canvas.height=img.height,ctx.drawImage(img,0,0),resolve(canvas.toDataURL(file.type))},img.src=URL.createObjectURL(file),img.onerror=reject})},222:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Display=void 0;const react_1=__importStar(__webpack_require__(0)),style={display:"flex",marginTop:10,backgroundColor:"rgb(242, 242, 242)",padding:10},imageContainerStyle={alignSelf:"center",maxWidth:200,marginRight:10};exports.Display=function Display({source$:source$}){const[images,setImages]=react_1.useState([]);return react_1.useEffect(()=>{const subscription=source$.subscribe(payload=>setImages(curr=>[...curr,...payload]));return()=>subscription.unsubscribe()},[source$]),react_1.default.createElement("div",null,images.map(({url:url,...rest},index)=>react_1.default.createElement("div",{key:index,style:style},react_1.default.createElement("div",{className:"image",style:imageContainerStyle},react_1.default.createElement("img",{src:url,alt:"",width:"100%"})),react_1.default.createElement("pre",{className:"json"},JSON.stringify(function clone({file:file,...rest}){if(file)return{file:{lastModified:file.lastModified,name:file.name,size:file.size,type:file.type},...rest};return{}}(rest),null,2)))))}},43:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.delay=exports.Preview=void 0;const react_1=__importDefault(__webpack_require__(0)),components_1=__webpack_require__(101);exports.Preview=({language:language="jsx",code:code,children:children,withSource:withSource,...props})=>react_1.default.createElement(components_1.Preview,{withSource:{...withSource,code:code,language:language},...props},children),exports.delay=ms=>new Promise(_=>setTimeout(_,ms))},455:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxUploadImage=exports.fromChangeEvent=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxFileToImage_1=__webpack_require__(221);function fromChangeEvent(event){return[event.target.files&&event.target.files,event]}exports.fromChangeEvent=fromChangeEvent,exports.useRxUploadImage=function useRxUploadImage(){const[source$,props]=react_1.useMemo(()=>{const subject=new rxjs_1.Subject;return[subject.pipe(operators_1.map(fromChangeEvent),operators_1.mergeMap(payload=>rxjs_1.zip(...useRxFileToImage_1.fileToImage(payload)))),{onChange:event=>subject.next(event)}]},[]);return[source$,props]}},456:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxPasteImage=exports.fromPasteImageEvent=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxFileToImage_1=__webpack_require__(221);function fromPasteImageEvent(clipboardEvent){return[clipboardEvent.clipboardData&&clipboardEvent.clipboardData.items,clipboardEvent]}exports.fromPasteImageEvent=fromPasteImageEvent,exports.useRxPasteImage=function useRxPasteImage(){const[source$,props]=react_1.useMemo(()=>{const subject=new rxjs_1.Subject;return[subject.pipe(operators_1.map(fromPasteImageEvent),operators_1.mergeMap(payload=>rxjs_1.zip(...useRxFileToImage_1.fileToImage(payload)))),{onPaste:event=>subject.next(event)}]},[]);return[source$,props]}},457:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxDropImage=exports.preventDragOver=exports.fromDropImageEvent=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxFileToImage_1=__webpack_require__(221);function fromDropImageEvent(dragEvent){return[dragEvent.dataTransfer&&dragEvent.dataTransfer.items,dragEvent]}exports.fromDropImageEvent=fromDropImageEvent,exports.preventDragOver=event=>event.preventDefault(),exports.useRxDropImage=function useRxDropImage(){const[source$,props]=react_1.useMemo(()=>{const subject=new rxjs_1.Subject;return[subject.pipe(operators_1.map(fromDropImageEvent),operators_1.mergeMap(payload=>rxjs_1.zip(...useRxFileToImage_1.fileToImage(payload)))),{onDragOver:exports.preventDragOver,onDrop:event=>{subject.next(event)}}]},[]);return[source$,props]}},458:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxInputComposing=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxInput_1=__webpack_require__(127);exports.useRxInputComposing=function useRxInputComposing({pipe:pipe,...options}={}){const compositionStart$=react_1.useRef(new rxjs_1.Subject),compositionEnd$=react_1.useRef(new rxjs_1.Subject),isComposing=react_1.useMemo(()=>source$=>{const isComposing$=rxjs_1.merge(compositionStart$.current.pipe(operators_1.map(()=>!0)),compositionEnd$.current.pipe(operators_1.map(()=>!1))).pipe(operators_1.startWith(!1));return source$.pipe(operators_1.combineLatest(isComposing$),operators_1.filter(([,isComposing])=>!isComposing),operators_1.map(([value])=>value),pipe||rxjs_1.pipe())},[pipe]),[value,inputProps]=useRxInput_1.useRxInput({pipe:isComposing,...options});return[value,react_1.useMemo(()=>{const handler=subject=>event=>subject.next(event);return{...inputProps,onCompositionStart:handler(compositionStart$.current),onCompositionEnd:handler(compositionEnd$.current)}},[inputProps])]}},467:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Basic=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxAsync_1=__webpack_require__(177),Display_1=__webpack_require__(220),asyncFn=()=>{return(ms=2e3,new Promise(_=>setTimeout(_,ms))).then(()=>fetch("https://api.github.com/repos/pong420/use-rx-hooks").then(res=>res.json()).then(data=>{if(data){const{name:name}=data;return{name:name,watch:data.watchers_count,star:data.stargazers_count,fork:data.forks_count}}}));var ms};exports.Basic=function Basic(){const state=useRxAsync_1.useRxAsync(asyncFn);return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("button",{onClick:state.run},"Reload"),react_1.default.createElement(Display_1.Display,Object.assign({style:{minHeight:100}},state)))}},468:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DynamicParams=void 0;const react_1=__importStar(__webpack_require__(0)),useRxInput_1=__webpack_require__(127),useRxAsync_1=__webpack_require__(177),Display_1=__webpack_require__(220),asyncFnWithParam=result=>{return(ms=1e3,new Promise(_=>setTimeout(_,ms))).then(()=>({result:result}));var ms};exports.DynamicParams=function DynamicParams(){const[value,props]=useRxInput_1.useRxInput(),state1=useRxAsync_1.useRxAsync(asyncFnWithParam,{defer:!0}),run=state1.run;react_1.useEffect(()=>run(value),[run,value]);const request=react_1.useCallback(()=>asyncFnWithParam(value),[value]),state2=useRxAsync_1.useRxAsync(request);return react_1.default.createElement("div",null,react_1.default.createElement("input",Object.assign({},props,{type:"text",placeholder:"type something here"})),react_1.default.createElement(Display_1.Display,Object.assign({style:{minHeight:50}},state1)),react_1.default.createElement(Display_1.Display,Object.assign({style:{minHeight:50}},state2)))}},469:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Debounce=void 0;const react_1=__importStar(__webpack_require__(0)),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxAsync_1=__webpack_require__(177),useRxInput_1=__webpack_require__(127),Display_1=__webpack_require__(220),asyncFn=username=>new rxjs_1.Observable(subscriber=>{subscriber.next(username)}).pipe(operators_1.debounceTime(1e3),operators_1.switchMap(username=>rxjs_1.from((username=>fetch(`https://api.github.com/users/${username}/repos`).then(async res=>{const result=await res.json();return res.ok?result:Promise.reject(result)}).then(repos=>repos.map(({full_name:full_name})=>full_name)))(username))));exports.Debounce=function Debounce(){const state=useRxAsync_1.useRxAsync(asyncFn,{defer:!0}),[username,props]=useRxInput_1.useRxInput(),{run:run}=state;return react_1.useEffect(()=>{username&&run(username)},[username,run]),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({},props,{style:{width:140,paddingLeft:5},type:"text",placeholder:"input a github username"})),react_1.default.createElement(Display_1.Display,Object.assign({},state)))}},470:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Retry=void 0;const react_1=__importDefault(__webpack_require__(0)),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxAsync_1=__webpack_require__(177),Display_1=__webpack_require__(220),asyncFn=()=>rxjs_1.from(Math.random()>.5?fetch("https://api.github.com/repos/pong420/use-rx-hooks").then(res=>res.json()).then(data=>{if(data){const{name:name}=data;return{name:name,watch:data.watchers_count,star:data.stargazers_count,fork:data.forks_count}}}):Promise.reject("Failed")).pipe(operators_1.retryWhen(errors=>errors.pipe(operators_1.switchMap((error,index)=>3===index?rxjs_1.throwError(error):rxjs_1.of(error)),operators_1.delay(1e3))));exports.Retry=function Retry(){const state=useRxAsync_1.useRxAsync(asyncFn,{defer:!0}),{run:run}=state;return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("button",{onClick:run},"Run"),react_1.default.createElement(Display_1.Display,Object.assign({style:{minHeight:100}},state)))}},471:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.UploadImage=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxUploadImage_1=__webpack_require__(455),Display_1=__webpack_require__(222);exports.UploadImage=()=>{const[image$,props]=useRxUploadImage_1.useRxUploadImage();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({type:"file",multiple:!0},props)),react_1.default.createElement(Display_1.Display,{source$:image$}))}},472:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.PasteImage=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxPasteImage_1=__webpack_require__(456),Display_1=__webpack_require__(222);exports.PasteImage=()=>{const[image$,props]=useRxPasteImage_1.useRxPasteImage();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({},props,{placeholder:"Paste image here"})),react_1.default.createElement(Display_1.Display,{source$:image$}))}},473:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DropImage=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxDropImage_1=__webpack_require__(457),Display_1=__webpack_require__(222);exports.DropImage=()=>{const[image$,props]=useRxDropImage_1.useRxDropImage();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",Object.assign({},props,{style:{width:"100%",border:"1px dashed",color:"#ccc",textAlign:"center",padding:30}}),"Drop an image to here"),react_1.default.createElement(Display_1.Display,{source$:image$}))}},474:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MixTogether=void 0;const react_1=__importStar(__webpack_require__(0)),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63),useRxFileToImage_1=__webpack_require__(221),useRxUploadImage_1=__webpack_require__(455),useRxDropImage_1=__webpack_require__(457),useRxPasteImage_1=__webpack_require__(456),Display_1=__webpack_require__(222);function mapEvent(event){return"paste"===event.type?useRxPasteImage_1.fromPasteImageEvent(event):"drop"===event.type?useRxDropImage_1.fromDropImageEvent(event):useRxUploadImage_1.fromChangeEvent(event)}exports.MixTogether=()=>{const fileInputRef=react_1.useRef(null),subject=react_1.useRef(new rxjs_1.Subject),{source$:source$,upload:upload}=react_1.useMemo(()=>({source$:subject.current.pipe(operators_1.map(mapEvent)),upload:event=>subject.current.next(event)}),[]),image$=useRxFileToImage_1.useRxFileToImage(source$);return react_1.default.createElement("div",null,react_1.default.createElement("div",{onPaste:upload,onDrop:upload,onDragOver:event=>event.preventDefault(),tabIndex:1,onClick:()=>fileInputRef.current&&fileInputRef.current.click(),style:{width:"100%",border:"1px dashed",color:"#ccc",cursor:"pointer",textAlign:"center",padding:30}},react_1.default.createElement("input",{type:"file",ref:fileInputRef,hidden:!0,onChange:upload}),"Click or Drop an image to here"),react_1.default.createElement(Display_1.Display,{source$:image$}))}},475:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Basic=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxInput_1=__webpack_require__(127);exports.Basic=()=>{const[value,inputProps]=useRxInput_1.useRxInput();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({},inputProps)),react_1.default.createElement("pre",null,value))}},476:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultValue=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxInput_1=__webpack_require__(127);exports.DefaultValue=()=>{const[value,inputProps]=useRxInput_1.useRxInput({defaultValue:"Default Value"});return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({},inputProps)),react_1.default.createElement("pre",null,value))}},477:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Debounce=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxInput_1=__webpack_require__(127),operators_1=__webpack_require__(63),debounce=ob=>ob.pipe(operators_1.debounceTime(1e3));exports.Debounce=()=>{const[value,inputProps]=useRxInput_1.useRxInput({pipe:debounce});return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({},inputProps)),react_1.default.createElement("pre",null,value))}},478:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Double=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxInput_1=__webpack_require__(127),operators_1=__webpack_require__(63),double=ob=>ob.pipe(operators_1.map(v=>isNaN(Number(v))?0:2*Number(v)));exports.Double=()=>{const[value,inputProps]=useRxInput_1.useRxInput({pipe:double});return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("input",Object.assign({type:"number"},inputProps)),react_1.default.createElement("pre",null,value))}},479:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Basic=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxInputComposing_1=__webpack_require__(458);exports.Basic=()=>{const[value,inputProps]=useRxInputComposing_1.useRxInputComposing();return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("pre",null,value),react_1.default.createElement("input",Object.assign({},inputProps)))}},480:function(module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Search=void 0;const react_1=__importStar(__webpack_require__(0)),useRxAsync_1=__webpack_require__(177),useRxInputComposing_1=__webpack_require__(458),asyncFn=result=>{return(ms=2e3,new Promise(_=>setTimeout(_,ms))).then(()=>result);var ms};exports.Search=()=>{const[value,inputProps]=useRxInputComposing_1.useRxInputComposing(),{loading:loading,data:data,run:run}=useRxAsync_1.useRxAsync(asyncFn,{defer:!0});return react_1.useEffect(()=>{value&&run(value)},[run,value]),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("pre",null,loading?"Loading...":data),react_1.default.createElement("input",Object.assign({},inputProps)))}},481:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Basic=void 0;const react_1=__importDefault(__webpack_require__(0)),useRxScroll_1=__webpack_require__(938);exports.Basic=function Basic(){const[state,props]=useRxScroll_1.useRxScroll();return react_1.default.createElement("div",{style:{position:"relative",height:300}},react_1.default.createElement("pre",{style:{position:"absolute",top:0,left:0}},JSON.stringify(state,null,2)),react_1.default.createElement("div",Object.assign({},props,{style:{overscrollBehavior:"contain",overflow:"scroll",position:"absolute",width:"100%",height:300}}),react_1.default.createElement("div",{style:{width:5e3,height:5e3}})))}},482:function(module,exports,__webpack_require__){__webpack_require__(483),__webpack_require__(630),module.exports=__webpack_require__(631)},547:function(module,exports){},631:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(460);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)(__webpack_require__(821),module)}.call(this,__webpack_require__(632)(module))},821:function(module,exports,__webpack_require__){var map={"./__stories__/useRxAsync/useRxAsync.stories.mdx":941,"./__stories__/useRxFileToImage/useRxFileToImage.stories.mdx":940,"./__stories__/useRxInput/useRxInput.stories.mdx":942,"./__stories__/useRxInputComposing/useRxInput.stories.mdx":946,"./__stories__/useScroll/useScroll.stories.mdx":944};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=821},938:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useRxScroll=void 0;const react_1=__webpack_require__(0),rxjs_1=__webpack_require__(78),operators_1=__webpack_require__(63);const initialState={x:0,y:0,scrolling:!1};exports.useRxScroll=function useRxScroll(ob){const subject=react_1.useRef(new rxjs_1.Subject),onScroll=react_1.useCallback(event=>subject.current.next(event),[]),[state,setState]=react_1.useState(initialState);return react_1.useEffect(()=>{const subscription=(ob||subject.current).pipe(operators_1.map(event=>{return{...(el=event.currentTarget,el instanceof Window?{x:el.scrollX,y:el.scrollY}:{x:el.scrollTop,y:el.scrollLeft}),scrolling:!0};var el}),operators_1.tap(state=>setState(state)),operators_1.debounceTime(150),operators_1.tap(state=>setState({...state,scrolling:!1}))).subscribe();return()=>{subscription.unsubscribe(),setState(initialState)}},[ob]),[state,{onScroll:onScroll}]}},940:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var esm=__webpack_require__(2),blocks=__webpack_require__(34),utils=__webpack_require__(43),UploadImage=__webpack_require__(471),PasteImage=__webpack_require__(472),DropImage=__webpack_require__(473),MixTogether=__webpack_require__(474);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"useRxFileToImage",mdxType:"Meta"}),Object(esm.mdx)("h1",null,"useRxFileToImage"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const image$ = useRxFileToImage(source$);\n\n// HOC of `useRxFileToImage`\nconst [image$, props] = useRxUploadImage();\nconst [image$, props] = useRxDropImage();\nconst [image$, props] = useRxPasteImage();\n")),Object(esm.mdx)("h2",null,"Typings"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"\nexport type RxFileToImageSource = [\n  FileList | DataTransferItemList | null,\n  Event | SyntheticEvent<Element | Window>\n];\n\nexport interface RxFileToImageState {\n  file: File;\n  url: string;\n}\n\nexport function useRxFileToImage(source$: Observable<RxFileToImageSource> | Array<Observable<RxFileToImageSource>>): Observable<RxFileToImageState>:\n\nexport function useRxUploadImage(): [Observable<RxFileToImageState[]>, { onChange }];\nexport function useRxDropImage(): [Observable<RxFileToImageState[]>, { onPaste }];\nexport function useRxPasteImage(): [Observable<RxFileToImageState[]>, { onDrop, onDragOver }];\n")),Object(esm.mdx)("h2",null,"Upload Image"),Object(esm.mdx)(utils.Preview,{name:"Upload Image",code:"import React from 'react';\nimport { useRxUploadImage } from '../../useRxUploadImage';\nimport { Display } from './Display';\n\nexport const UploadImage = () => {\n  const [image$, props] = useRxUploadImage();\n\n  return (\n    <>\n      <input type=\"file\" multiple {...props} />\n      <Display source$={image$}></Display>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(UploadImage.UploadImage,{mdxType:"UploadImage"})),Object(esm.mdx)("h2",null,"Paste Image"),Object(esm.mdx)(utils.Preview,{name:"Paste Image",code:"import React from 'react';\nimport { useRxPasteImage } from '../../useRxPasteImage';\nimport { Display } from './Display';\n\nexport const PasteImage = () => {\n  const [image$, props] = useRxPasteImage();\n\n  return (\n    <>\n      <input {...props} placeholder=\"Paste image here\" />\n      <Display source$={image$}></Display>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(PasteImage.PasteImage,{mdxType:"PasteImage"})),Object(esm.mdx)("h2",null,"Drop Image"),Object(esm.mdx)(utils.Preview,{name:"Drop Image",code:"import React from 'react';\nimport { useRxDropImage } from '../../useRxDropImage';\nimport { Display } from './Display';\n\nexport const DropImage = () => {\n  const [image$, props] = useRxDropImage();\n\n  return (\n    <>\n      <div\n        {...props}\n        style={{\n          width: '100%',\n          border: '1px dashed',\n          color: '#ccc',\n          textAlign: 'center',\n          padding: 30,\n        }}\n      >\n        Drop an image to here\n      </div>\n      <Display source$={image$}></Display>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(DropImage.DropImage,{mdxType:"DropImage"})),Object(esm.mdx)("h2",null,"Mix Together"),Object(esm.mdx)(utils.Preview,{name:"Mix Together",code:"import React, {\n  useRef,\n  ChangeEvent,\n  ClipboardEvent,\n  DragEvent,\n  useMemo,\n} from 'react';\nimport { Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { useRxFileToImage } from '../../useRxFileToImage';\nimport { fromChangeEvent } from '../../useRxUploadImage';\nimport { fromDropImageEvent } from '../../useRxDropImage';\nimport { fromPasteImageEvent } from '../../useRxPasteImage';\nimport { Display } from './Display';\n\ntype UploadEvent = ChangeEvent | ClipboardEvent | DragEvent;\n\nfunction mapEvent(event: UploadEvent) {\n  if (event.type === 'paste') {\n    return fromPasteImageEvent(event as ClipboardEvent);\n  }\n  if (event.type === 'drop') {\n    return fromDropImageEvent(event as DragEvent);\n  }\n  return fromChangeEvent(event as ChangeEvent<HTMLInputElement>);\n}\n\nexport const MixTogether = () => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const subject = useRef(new Subject<UploadEvent>());\n\n  const { source$, upload } = useMemo(() => {\n    return {\n      source$: subject.current.pipe(map(mapEvent)),\n      upload: (event: UploadEvent) => subject.current.next(event),\n    };\n  }, []);\n\n  const image$ = useRxFileToImage(source$);\n\n  return (\n    <div>\n      <div\n        onPaste={upload}\n        onDrop={upload}\n        onDragOver={event => event.preventDefault()}\n        tabIndex={1}\n        onClick={() => fileInputRef.current && fileInputRef.current.click()}\n        style={{\n          width: '100%',\n          border: '1px dashed',\n          color: '#ccc',\n          cursor: 'pointer',\n          textAlign: 'center',\n          padding: 30,\n        }}\n      >\n        <input type=\"file\" ref={fileInputRef} hidden onChange={upload} />\n        Click or Drop an image to here\n      </div>\n      <Display source$={image$}></Display>\n    </div>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(MixTogether.MixTogether,{mdxType:"MixTogether"})),Object(esm.mdx)("h2",null,"Custom"),Object(esm.mdx)("blockquote",null,Object(esm.mdx)("p",{parentName:"blockquote"},"you could import ",Object(esm.mdx)("inlineCode",{parentName:"p"},"fromDropImageEvent"),", ",Object(esm.mdx)("inlineCode",{parentName:"p"},"fromPasteImageEvent"),", ",Object(esm.mdx)("inlineCode",{parentName:"p"},"useRxFileToImage")," from this libaray")),Object(esm.mdx)("p",null,"An example"),Object(esm.mdx)("ul",null,Object(esm.mdx)("li",{parentName:"ul"},"mix paste and drop action"),Object(esm.mdx)("li",{parentName:"ul"},"use window instead of dom")),Object(esm.mdx)(blocks.Source,{code:"import React, { ClipboardEvent, DragEvent } from 'react';\nimport { merge, fromEvent } from 'rxjs';\nimport { map, tap, filter } from 'rxjs/operators';\nimport { fromDropImageEvent } from '../../useRxDropImage';\nimport { fromPasteImageEvent } from '../../useRxPasteImage';\nimport { useRxFileToImage } from '../../useRxFileToImage';\nimport { Display } from './Display';\n\nconst paste$ = fromEvent<ClipboardEvent<Window>>(window, 'paste').pipe(\n  map(fromPasteImageEvent)\n);\n\nconst drop$ = merge(\n  fromEvent<DragEvent<Window>>(window, 'drop'),\n  fromEvent<DragEvent<Window>>(window, 'dragover').pipe(\n    tap(event => event.preventDefault())\n  )\n).pipe(\n  filter(event => event.type === 'drop'),\n  map(fromDropImageEvent)\n);\n\nconst source$ = [paste$, drop$];\n\nexport const Window = () => {\n  const image$ = useRxFileToImage(source$);\n  return <Display source$={image$} />;\n};\n",language:"jsx",mdxType:"Source"}))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};const componentMeta={title:"useRxFileToImage",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:({context:context,children:children})=>Object(esm.mdx)(blocks.DocsContainer,{context:{...context,mdxStoryNameToId:mdxStoryNameToId}},children),page:MDXContent};__webpack_exports__.default=componentMeta},941:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var esm=__webpack_require__(2),blocks=__webpack_require__(34),utils=__webpack_require__(43),Basic=__webpack_require__(467),DynamicParams=__webpack_require__(468),Debounce=__webpack_require__(469),Retry=__webpack_require__(470);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"useRxAsync",mdxType:"Meta"}),Object(esm.mdx)("h1",null,"useRxAsync"),Object(esm.mdx)("p",null,"Fetch data with React hooks and RxJS. Inspired by ",Object(esm.mdx)("a",_extends({parentName:"p"},{href:"https://github.com/async-library/react-async"}),"react-async")),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const state = useRxAsync(asyncFn, options?);\n")),Object(esm.mdx)("h2",null,"State"),Object(esm.mdx)("table",null,Object(esm.mdx)("thead",{parentName:"table"},Object(esm.mdx)("tr",{parentName:"thead"},Object(esm.mdx)("th",_extends({parentName:"tr"},{align:null}),"name"),Object(esm.mdx)("th",_extends({parentName:"tr"},{align:null}),"description"))),Object(esm.mdx)("tbody",{parentName:"table"},Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"data"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"The value return from asyncFn")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"loading"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"boolean")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"error"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"any, depends on your asyncFn")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"cancel"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"ignore the new value return from your ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn"))),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"reset"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"reset data, loading, error to initialValue")))),Object(esm.mdx)("h2",null,"AsyncFn"),Object(esm.mdx)("p",null,"A function that return ",Object(esm.mdx)("inlineCode",{parentName:"p"},"PromiseLike")," or ",Object(esm.mdx)("inlineCode",{parentName:"p"},"Observable"),". For examples,"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const delay = (ms: number) => new Promise(_ => setTimeout(_, ms));\nconst rxAsyncFn = (result: string) => timer(1000).pipe(map(() => result));\n")),Object(esm.mdx)("h2",null,"Options"),Object(esm.mdx)("table",null,Object(esm.mdx)("thead",{parentName:"table"},Object(esm.mdx)("tr",{parentName:"thead"},Object(esm.mdx)("th",_extends({parentName:"tr"},{align:null}),"option"),Object(esm.mdx)("th",_extends({parentName:"tr"},{align:null}),"description"))),Object(esm.mdx)("tbody",{parentName:"table"},Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"initialValue"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"the initial value of ",Object(esm.mdx)("inlineCode",{parentName:"td"},"data"))),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"defer"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"by default, your ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn")," will be call at initial or it changed. if you set ",Object(esm.mdx)("inlineCode",{parentName:"td"},"defer")," to true, ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn")," will only call when you execute the ",Object(esm.mdx)("inlineCode",{parentName:"td"},"run")," mehtod")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"onStart"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"callback when ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn")," start, () => void")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"onSuccess"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"callback when ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn")," success, (result) => void")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"onFaulure"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"callback when ",Object(esm.mdx)("inlineCode",{parentName:"td"},"asyncFn")," failure, (error: any) => void")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"mapOperator"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"switchMap, concatMap , exhaustMap , mergeMap , flatMap, default is switchMap")),Object(esm.mdx)("tr",{parentName:"tbody"},Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"effect"),Object(esm.mdx)("td",_extends({parentName:"tr"},{align:null}),"default is ",Object(esm.mdx)("inlineCode",{parentName:"td"},"React.useEffect"),", you could use ",Object(esm.mdx)("inlineCode",{parentName:"td"},"React.useLayoutEffect")," instead")))),Object(esm.mdx)("h2",null,"Basic"),Object(esm.mdx)(utils.Preview,{name:"Basic",code:"import React from 'react';\nimport { useRxAsync } from '../../useRxAsync';\nimport { Display } from './Display';\n\nconst delay = (ms: number) => new Promise(_ => setTimeout(_, ms));\n\nconst asyncFn = () =>\n  delay(2000).then(() =>\n    fetch('https://api.github.com/repos/pong420/use-rx-hooks')\n      .then(res => res.json())\n      .then(data => {\n        if (data) {\n          const { name } = data;\n          return {\n            name,\n            watch: data.watchers_count,\n            star: data.stargazers_count,\n            fork: data.forks_count,\n          };\n        }\n      })\n  );\n\nexport function Basic() {\n  const state = useRxAsync(asyncFn);\n  return (\n    <>\n      <button onClick={state.run}>Reload</button>\n      <Display style={{ minHeight: 100 }} {...state} />\n    </>\n  );\n}\n",mdxType:"Preview"},Object(esm.mdx)(Basic.Basic,{mdxType:"Basic"})),Object(esm.mdx)("h2",null,"AsyncFn with dynamic parameters"),Object(esm.mdx)(utils.Preview,{name:"DynamicParams",code:"import React, { useEffect, useCallback } from 'react';\nimport { useRxInput } from '../../useRxInput';\nimport { useRxAsync } from '../../useRxAsync';\nimport { Display } from './Display';\n\nconst delay = (ms: number) => new Promise(_ => setTimeout(_, ms));\nconst asyncFnWithParam = (result: string) =>\n  delay(1000).then(() => ({ result }));\n\nexport function DynamicParams() {\n  const [value, props] = useRxInput();\n\n  const state1 = useRxAsync(asyncFnWithParam, { defer: true });\n  const run = state1.run;\n\n  useEffect(() => run(value), [run, value]);\n\n  // or wrapper your `asyncFn` with `useCallback`\n\n  const request = useCallback(() => asyncFnWithParam(value), [value]);\n  const state2 = useRxAsync(request);\n\n  return (\n    <div>\n      <input {...props} type=\"text\" placeholder=\"type something here\" />\n      <Display style={{ minHeight: 50 }} {...state1} />\n      <Display style={{ minHeight: 50 }} {...state2} />\n    </div>\n  );\n}\n",mdxType:"Preview"},Object(esm.mdx)(DynamicParams.DynamicParams,{mdxType:"DynamicParams"})),Object(esm.mdx)("h2",null,"AsyncFn with RxJS opertators"),Object(esm.mdx)("br",null),Object(esm.mdx)("h3",null,"deboune"),Object(esm.mdx)("p",null,"Find a GitHub user's repositories"),Object(esm.mdx)(utils.Preview,{name:"Debounce",code:"import React, { useEffect } from 'react';\nimport { from, Observable } from 'rxjs';\nimport { debounceTime, switchMap } from 'rxjs/operators';\nimport { useRxAsync } from '../../useRxAsync';\nimport { useRxInput } from '../../useRxInput';\nimport { Display } from './Display';\n\nconst getGithubUserRepos = (username: string) =>\n  fetch(`https://api.github.com/users/${username}/repos`)\n    .then(async res => {\n      const result = await res.json();\n      return res.ok ? result : Promise.reject(result);\n    })\n    .then<string[]>(repos => repos.map(({ full_name }) => full_name));\n\nconst asyncFn = (username: string) =>\n  new Observable<string>(subscriber => {\n    subscriber.next(username);\n  }).pipe(\n    debounceTime(1000),\n    switchMap(username => from(getGithubUserRepos(username)))\n  );\n\nexport function Debounce() {\n  const state = useRxAsync(asyncFn, { defer: true });\n  const [username, props] = useRxInput();\n  const { run } = state;\n\n  useEffect(() => {\n    username && run(username);\n  }, [username, run]);\n\n  return (\n    <>\n      <input\n        {...props}\n        style={{ width: 140, paddingLeft: 5 }}\n        type=\"text\"\n        placeholder=\"input a github username\"\n      />\n      <Display {...state}></Display>\n    </>\n  );\n}\n",mdxType:"Preview"},Object(esm.mdx)(Debounce.Debounce,{mdxType:"Debounce"})),Object(esm.mdx)("h3",null,"retry"),Object(esm.mdx)("p",null,"if the request has errors, delay 1 second then retry up to 3 times"),Object(esm.mdx)(utils.Preview,{name:"Retry",code:"import React from 'react';\nimport { from, of, throwError } from 'rxjs';\nimport { delay, switchMap, retryWhen } from 'rxjs/operators';\nimport { useRxAsync } from '../../useRxAsync';\nimport { Display } from './Display';\n\nconst request = () =>\n  Math.random() > 0.5\n    ? fetch('https://api.github.com/repos/pong420/use-rx-hooks')\n        .then(res => res.json())\n        .then(data => {\n          if (data) {\n            const { name } = data;\n            return {\n              name,\n              watch: data.watchers_count,\n              star: data.stargazers_count,\n              fork: data.forks_count,\n            };\n          }\n        })\n    : Promise.reject('Failed');\n\nconst asyncFn = () =>\n  from(request()).pipe(\n    retryWhen(errors =>\n      errors.pipe(\n        switchMap((error, index) =>\n          index === 3 ? throwError(error) : of(error)\n        ),\n        delay(1000)\n      )\n    )\n  );\n\nexport function Retry() {\n  const state = useRxAsync(asyncFn, { defer: true });\n  const { run } = state;\n\n  return (\n    <>\n      <button onClick={run}>Run</button>\n      <Display style={{ minHeight: 100 }} {...state}></Display>\n    </>\n  );\n}\n",mdxType:"Preview"},Object(esm.mdx)(Retry.Retry,{mdxType:"Retry"})))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};const componentMeta={title:"useRxAsync",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:({context:context,children:children})=>Object(esm.mdx)(blocks.DocsContainer,{context:{...context,mdxStoryNameToId:mdxStoryNameToId}},children),page:MDXContent};__webpack_exports__.default=componentMeta},942:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var esm=__webpack_require__(2),blocks=__webpack_require__(34),utils=__webpack_require__(43),Basic=__webpack_require__(475),DefaultValue=__webpack_require__(476),Debounce=__webpack_require__(477),Double=__webpack_require__(478);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"useRxInput",mdxType:"Meta"}),Object(esm.mdx)("h1",null,"useRxInput"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const [value, inputProps] = useRxInput(options?);\n")),Object(esm.mdx)("h2",null,"Typings"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"export type RxInputEl = HTMLInputElement | HTMLTextAreaElement;\n\nexport type RxInputPipe<O> = (ob: Observable<string>) => Observable<string | O>;\n\nexport interface RxInputOptions<O> {\n  defaultValue?: string;\n  pipe?: RxInputPipe<O>;\n}\n\nexport function useRxInput<O, T extends RxInputEl = HTMLInputElement>(\n  options?: RxInputOptions<O>\n): [\n  string | O | undefined,\n  Required<Pick<InputHTMLAttributes<T>, 'value' | 'onChange'>>\n];\n")),Object(esm.mdx)("h2",null,"Basic"),Object(esm.mdx)(utils.Preview,{name:"Basic",code:"import React from 'react';\nimport { useRxInput } from '../../useRxInput';\n\nexport const Basic = () => {\n  const [value, inputProps] = useRxInput();\n  return (\n    <>\n      <input {...inputProps} />\n      <pre>{value}</pre>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(Basic.Basic,{mdxType:"Basic"})),Object(esm.mdx)("h2",null,"With default value"),Object(esm.mdx)(utils.Preview,{name:"Default Value",code:"import React from 'react';\nimport { useRxInput } from '../../useRxInput';\n\nexport const DefaultValue = () => {\n  const [value, inputProps] = useRxInput({ defaultValue: 'Default Value' });\n  return (\n    <>\n      <input {...inputProps} />\n      <pre>{value}</pre>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(DefaultValue.DefaultValue,{mdxType:"DefaultValue"})),Object(esm.mdx)("h2",null,"Debounce 1 second"),Object(esm.mdx)(utils.Preview,{name:"Debounce",code:"import React from 'react';\nimport { useRxInput, RxInputPipe } from '../../useRxInput';\nimport { debounceTime } from 'rxjs/operators';\n\nconst debounce: RxInputPipe<string> = ob => ob.pipe(debounceTime(1000));\n\nexport const Debounce = () => {\n  const [value, inputProps] = useRxInput({ pipe: debounce });\n  return (\n    <>\n      <input {...inputProps} />\n      <pre>{value}</pre>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(Debounce.Debounce,{mdxType:"Debounce"})),Object(esm.mdx)("h2",null,"Double your input"),Object(esm.mdx)(utils.Preview,{name:"Double",code:"import React from 'react';\nimport { useRxInput, RxInputPipe } from '../../useRxInput';\nimport { map } from 'rxjs/operators';\n\nconst double: RxInputPipe<number> = ob =>\n  ob.pipe(map(v => (!isNaN(Number(v)) ? Number(v) * 2 : 0)));\n\nexport const Double = () => {\n  const [value, inputProps] = useRxInput({ pipe: double });\n  return (\n    <>\n      <input type=\"number\" {...inputProps} />\n      <pre>{value}</pre>\n    </>\n  );\n};\n",mdxType:"Preview"},Object(esm.mdx)(Double.Double,{mdxType:"Double"})))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};const componentMeta={title:"useRxInput",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:({context:context,children:children})=>Object(esm.mdx)(blocks.DocsContainer,{context:{...context,mdxStoryNameToId:mdxStoryNameToId}},children),page:MDXContent};__webpack_exports__.default=componentMeta},944:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var esm=__webpack_require__(2),blocks=__webpack_require__(34),utils=__webpack_require__(43),Basic=__webpack_require__(481);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"useRxScroll",mdxType:"Meta"}),Object(esm.mdx)("h1",null,"useRxScroll"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const [state, props] = useRxScroll(ob?);\n")),Object(esm.mdx)("h2",null,"Typings"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"import { UIEvent } from 'react';\n\nexport interface RxScrollState {\n  x: number;\n  y: number;\n  scrolling: boolean;\n}\n\nexport function useRxScroll(ob?: Observable<UIEvent<T>>): [RxFileToImageState, { onScroll }]:\n")),Object(esm.mdx)("h2",null,"Basic"),Object(esm.mdx)(utils.Preview,{name:"Basic",code:"import React from 'react';\nimport { useRxScroll } from '../../useRxScroll';\n\nexport function Basic() {\n  const [state, props] = useRxScroll();\n\n  return (\n    <div style={{ position: 'relative', height: 300 }}>\n      <pre style={{ position: 'absolute', top: 0, left: 0 }}>\n        {JSON.stringify(state, null, 2)}\n      </pre>\n      <div\n        {...props}\n        style={{\n          overscrollBehavior: 'contain',\n          overflow: 'scroll',\n          position: 'absolute',\n          width: '100%',\n          height: 300,\n        }}\n      >\n        <div style={{ width: 5000, height: 5000 }}></div>\n      </div>\n    </div>\n  );\n}\n",mdxType:"Preview"},Object(esm.mdx)(Basic.Basic,{mdxType:"Basic"})),Object(esm.mdx)("h2",null,"Use with window"),Object(esm.mdx)(blocks.Source,{code:"import React, { UIEvent, useEffect } from 'react';\nimport { fromEvent } from 'rxjs';\nimport { useRxScroll } from '../../useRxScroll';\n\nconst windowScroll$ = fromEvent<UIEvent>(window, 'scroll');\n\nexport function Window() {\n  const [state] = useRxScroll(windowScroll$);\n\n  return <pre>{JSON.stringify(state, null, 2)}</pre>;\n}\n\n// or\n\nexport function Window2() {\n  const [state, { onScroll }] = useRxScroll();\n\n  useEffect(() => {\n    const handler = (event: any) => onScroll(event as UIEvent);\n    window.addEventListener('scroll', handler);\n    return () => window.removeEventListener('scroll', handler);\n  }, [onScroll]);\n\n  return <pre>{JSON.stringify(state, null, 2)}</pre>;\n}\n",language:"jsx",mdxType:"Source"}))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};const componentMeta={title:"useRxScroll",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:({context:context,children:children})=>Object(esm.mdx)(blocks.DocsContainer,{context:{...context,mdxStoryNameToId:mdxStoryNameToId}},children),page:MDXContent};__webpack_exports__.default=componentMeta},946:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(0);var esm=__webpack_require__(2),blocks=__webpack_require__(34),utils=__webpack_require__(43),Basic=__webpack_require__(479),Search=__webpack_require__(480),useRxInputComposing_Basic="import React from 'react';\nimport { useRxInputComposing } from '../../useRxInputComposing';\n\nexport const Basic = () => {\n  const [value, inputProps] = useRxInputComposing();\n  return (\n    <>\n      <pre>{value}</pre>\n      <input {...inputProps} />\n    </>\n  );\n};\n";function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}const layoutProps={};function MDXContent({components:components,...props}){return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"useRxInputComposing",mdxType:"Meta"}),Object(esm.mdx)("h1",null,"useRxInputComposing"),Object(esm.mdx)("p",null,"HOC of ",Object(esm.mdx)("inlineCode",{parentName:"p"},"useRxInput"),". ",Object(esm.mdx)("inlineCode",{parentName:"p"},"value")," will not change while input is composing"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"const [value, inputProps] = useRxInputComposing(options?);\n")),Object(esm.mdx)("h2",null,"Typings"),Object(esm.mdx)("pre",null,Object(esm.mdx)("code",_extends({parentName:"pre"},{className:"language-js"}),"export type RxInputEl = HTMLInputElement | HTMLTextAreaElement;\n\nexport type RxInputPipe<O> = (ob: Observable<string>) => Observable<string | O>;\n\nexport interface RxInputOptions<O> {\n  defaultValue?: string;\n  pipe?: RxInputPipe<O>;\n}\n\n\nexport function useRxInputComposing<O, T extends RxInputEl = HTMLInputElement>(\n  options?: RxInputOptions<O>\n): [\n  string | O | undefined,\n  Required<\n    Pick<\n      InputHTMLAttributes<T>,\n      'value' | 'onChange' | 'onCompositionStart' | 'onCompositionEnd'\n    >\n  >\n];\n")),Object(esm.mdx)("h2",null,"Basic"),Object(esm.mdx)(utils.Preview,{name:"Basic",code:useRxInputComposing_Basic,mdxType:"Preview"},Object(esm.mdx)(Basic.Basic,{mdxType:"Basic"})),Object(esm.mdx)("h2",null,"Search"),Object(esm.mdx)(utils.Preview,{name:"Search",code:useRxInputComposing_Basic,mdxType:"Preview"},Object(esm.mdx)(Search.Search,{mdxType:"Search"})))}MDXContent.isMDXComponent=!0;const __page=()=>{throw new Error("Docs-only story")};__page.story={parameters:{docsOnly:!0}};const componentMeta={title:"useRxInputComposing",includeStories:["__page"]},mdxStoryNameToId={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={container:({context:context,children:children})=>Object(esm.mdx)(blocks.DocsContainer,{context:{...context,mdxStoryNameToId:mdxStoryNameToId}},children),page:MDXContent};__webpack_exports__.default=componentMeta}},[[482,1,2]]]);
//# sourceMappingURL=main.e1cd136dbe8012a6e4ef.bundle.js.map